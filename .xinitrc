#!/bin/sh

if [ ! -e "~/.config/Xresources" ]; then
	# apply-theme hasn't been run, so run it
	# Many applications depend on their config files existing, and a lot of
	# them are autogenerated by apply-theme
	# Thankfully it doesn't take very long

	[ ! -e "~/.config/theme/selected" ] && ln -s ~/.config/theme/selected ~/.config/theme/gruvbox-dark
	apply-theme
fi

export $(dbus-launch)

xrdb -merge < ~/.config/Xresources
feh --bg-tile ~/.config/wall

xset r rate 300 20 &
setxkbmap -option caps:super &

runsvdir ~/.local/etc/sv &

# Need to cleanup runit before we're done.
dwm

usv force-stop ~/.local/etc/sv/*
usv exit ~/.local/etc/sv/*
